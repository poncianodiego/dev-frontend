{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.StabilityDeposit = void 0;\n\nvar Decimal_1 = require(\"./Decimal\");\n/**\n * A Stability Deposit and its accrued gains.\n *\n * @public\n */\n\n\nvar StabilityDeposit = /*#__PURE__*/function () {\n  /** @internal */\n  function StabilityDeposit(initialLUSD, currentLUSD, collateralGain, lqtyReward, frontendTag) {\n    _classCallCheck(this, StabilityDeposit);\n\n    this.initialLUSD = initialLUSD;\n    this.currentLUSD = currentLUSD;\n    this.collateralGain = collateralGain;\n    this.lqtyReward = lqtyReward;\n    this.frontendTag = frontendTag;\n\n    if (this.currentLUSD.gt(this.initialLUSD)) {\n      throw new Error(\"currentLUSD can't be greater than initialLUSD\");\n    }\n  }\n\n  _createClass(StabilityDeposit, [{\n    key: \"isEmpty\",\n    get: function get() {\n      return this.initialLUSD.isZero && this.currentLUSD.isZero && this.collateralGain.isZero && this.lqtyReward.isZero;\n    }\n    /** @internal */\n\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      return \"{ initialLUSD: \".concat(this.initialLUSD) + \", currentLUSD: \".concat(this.currentLUSD) + \", collateralGain: \".concat(this.collateralGain) + \", lqtyReward: \".concat(this.lqtyReward) + \", frontendTag: \\\"\".concat(this.frontendTag, \"\\\" }\");\n    }\n    /**\n     * Compare to another instance of `StabilityDeposit`.\n     */\n\n  }, {\n    key: \"equals\",\n    value: function equals(that) {\n      return this.initialLUSD.eq(that.initialLUSD) && this.currentLUSD.eq(that.currentLUSD) && this.collateralGain.eq(that.collateralGain) && this.lqtyReward.eq(that.lqtyReward) && this.frontendTag === that.frontendTag;\n    }\n    /**\n     * Calculate the difference between the `currentLUSD` in this Stability Deposit and `thatLUSD`.\n     *\n     * @returns An object representing the change, or `undefined` if the deposited amounts are equal.\n     */\n\n  }, {\n    key: \"whatChanged\",\n    value: function whatChanged(thatLUSD) {\n      thatLUSD = Decimal_1.Decimal.from(thatLUSD);\n\n      if (thatLUSD.lt(this.currentLUSD)) {\n        return {\n          withdrawLUSD: this.currentLUSD.sub(thatLUSD),\n          withdrawAllLUSD: thatLUSD.isZero\n        };\n      }\n\n      if (thatLUSD.gt(this.currentLUSD)) {\n        return {\n          depositLUSD: thatLUSD.sub(this.currentLUSD)\n        };\n      }\n    }\n    /**\n     * Apply a {@link StabilityDepositChange} to this Stability Deposit.\n     *\n     * @returns The new deposited LUSD amount.\n     */\n\n  }, {\n    key: \"apply\",\n    value: function apply(change) {\n      if (!change) {\n        return this.currentLUSD;\n      }\n\n      if (change.withdrawLUSD !== undefined) {\n        return change.withdrawAllLUSD || this.currentLUSD.lte(change.withdrawLUSD) ? Decimal_1.Decimal.ZERO : this.currentLUSD.sub(change.withdrawLUSD);\n      } else {\n        return this.currentLUSD.add(change.depositLUSD);\n      }\n    }\n  }]);\n\n  return StabilityDeposit;\n}();\n\nexports.StabilityDeposit = StabilityDeposit;","map":{"version":3,"sources":["../../src/StabilityDeposit.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,IAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;AAWA;;;;AAIG;;;IACU,gB;AAsBX;AACA,4BACE,WADF,EAEE,WAFF,EAGE,cAHF,EAIE,UAJF,EAKE,WALF,EAKqB;AAAA;;AAEnB,SAAK,WAAL,GAAmB,WAAnB;AACA,SAAK,WAAL,GAAmB,WAAnB;AACA,SAAK,cAAL,GAAsB,cAAtB;AACA,SAAK,UAAL,GAAkB,UAAlB;AACA,SAAK,WAAL,GAAmB,WAAnB;;AAEA,QAAI,KAAK,WAAL,CAAiB,EAAjB,CAAoB,KAAK,WAAzB,CAAJ,EAA2C;AACzC,YAAM,IAAI,KAAJ,CAAU,+CAAV,CAAN;AACD;AACF;;;;SAED,eAAW;AACT,aACE,KAAK,WAAL,CAAiB,MAAjB,IACA,KAAK,WAAL,CAAiB,MADjB,IAEA,KAAK,cAAL,CAAoB,MAFpB,IAGA,KAAK,UAAL,CAAgB,MAJlB;AAMD;AAED;;;;WACA,oBAAQ;AACN,aACE,yBAAkB,KAAK,WAAvB,6BACkB,KAAK,WADvB,gCAEqB,KAAK,cAF1B,4BAGiB,KAAK,UAHtB,+BAImB,KAAK,WAJxB,SADF;AAOD;AAED;;AAEG;;;;WACH,gBAAO,IAAP,EAA6B;AAC3B,aACE,KAAK,WAAL,CAAiB,EAAjB,CAAoB,IAAI,CAAC,WAAzB,KACA,KAAK,WAAL,CAAiB,EAAjB,CAAoB,IAAI,CAAC,WAAzB,CADA,IAEA,KAAK,cAAL,CAAoB,EAApB,CAAuB,IAAI,CAAC,cAA5B,CAFA,IAGA,KAAK,UAAL,CAAgB,EAAhB,CAAmB,IAAI,CAAC,UAAxB,CAHA,IAIA,KAAK,WAAL,KAAqB,IAAI,CAAC,WAL5B;AAOD;AAED;;;;AAIG;;;;WACH,qBAAY,QAAZ,EAAgC;AAC9B,MAAA,QAAQ,GAAG,SAAA,CAAA,OAAA,CAAQ,IAAR,CAAa,QAAb,CAAX;;AAEA,UAAI,QAAQ,CAAC,EAAT,CAAY,KAAK,WAAjB,CAAJ,EAAmC;AACjC,eAAO;AAAE,UAAA,YAAY,EAAE,KAAK,WAAL,CAAiB,GAAjB,CAAqB,QAArB,CAAhB;AAAgD,UAAA,eAAe,EAAE,QAAQ,CAAC;AAA1E,SAAP;AACD;;AAED,UAAI,QAAQ,CAAC,EAAT,CAAY,KAAK,WAAjB,CAAJ,EAAmC;AACjC,eAAO;AAAE,UAAA,WAAW,EAAE,QAAQ,CAAC,GAAT,CAAa,KAAK,WAAlB;AAAf,SAAP;AACD;AACF;AAED;;;;AAIG;;;;WACH,eAAM,MAAN,EAA4D;AAC1D,UAAI,CAAC,MAAL,EAAa;AACX,eAAO,KAAK,WAAZ;AACD;;AAED,UAAI,MAAM,CAAC,YAAP,KAAwB,SAA5B,EAAuC;AACrC,eAAO,MAAM,CAAC,eAAP,IAA0B,KAAK,WAAL,CAAiB,GAAjB,CAAqB,MAAM,CAAC,YAA5B,CAA1B,GACH,SAAA,CAAA,OAAA,CAAQ,IADL,GAEH,KAAK,WAAL,CAAiB,GAAjB,CAAqB,MAAM,CAAC,YAA5B,CAFJ;AAGD,OAJD,MAIO;AACL,eAAO,KAAK,WAAL,CAAiB,GAAjB,CAAqB,MAAM,CAAC,WAA5B,CAAP;AACD;AACF;;;;;;AA5GH,OAAA,CAAA,gBAAA,GAAA,gBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StabilityDeposit = void 0;\nconst Decimal_1 = require(\"./Decimal\");\n/**\n * A Stability Deposit and its accrued gains.\n *\n * @public\n */\nclass StabilityDeposit {\n    /** @internal */\n    constructor(initialLUSD, currentLUSD, collateralGain, lqtyReward, frontendTag) {\n        this.initialLUSD = initialLUSD;\n        this.currentLUSD = currentLUSD;\n        this.collateralGain = collateralGain;\n        this.lqtyReward = lqtyReward;\n        this.frontendTag = frontendTag;\n        if (this.currentLUSD.gt(this.initialLUSD)) {\n            throw new Error(\"currentLUSD can't be greater than initialLUSD\");\n        }\n    }\n    get isEmpty() {\n        return (this.initialLUSD.isZero &&\n            this.currentLUSD.isZero &&\n            this.collateralGain.isZero &&\n            this.lqtyReward.isZero);\n    }\n    /** @internal */\n    toString() {\n        return (`{ initialLUSD: ${this.initialLUSD}` +\n            `, currentLUSD: ${this.currentLUSD}` +\n            `, collateralGain: ${this.collateralGain}` +\n            `, lqtyReward: ${this.lqtyReward}` +\n            `, frontendTag: \"${this.frontendTag}\" }`);\n    }\n    /**\n     * Compare to another instance of `StabilityDeposit`.\n     */\n    equals(that) {\n        return (this.initialLUSD.eq(that.initialLUSD) &&\n            this.currentLUSD.eq(that.currentLUSD) &&\n            this.collateralGain.eq(that.collateralGain) &&\n            this.lqtyReward.eq(that.lqtyReward) &&\n            this.frontendTag === that.frontendTag);\n    }\n    /**\n     * Calculate the difference between the `currentLUSD` in this Stability Deposit and `thatLUSD`.\n     *\n     * @returns An object representing the change, or `undefined` if the deposited amounts are equal.\n     */\n    whatChanged(thatLUSD) {\n        thatLUSD = Decimal_1.Decimal.from(thatLUSD);\n        if (thatLUSD.lt(this.currentLUSD)) {\n            return { withdrawLUSD: this.currentLUSD.sub(thatLUSD), withdrawAllLUSD: thatLUSD.isZero };\n        }\n        if (thatLUSD.gt(this.currentLUSD)) {\n            return { depositLUSD: thatLUSD.sub(this.currentLUSD) };\n        }\n    }\n    /**\n     * Apply a {@link StabilityDepositChange} to this Stability Deposit.\n     *\n     * @returns The new deposited LUSD amount.\n     */\n    apply(change) {\n        if (!change) {\n            return this.currentLUSD;\n        }\n        if (change.withdrawLUSD !== undefined) {\n            return change.withdrawAllLUSD || this.currentLUSD.lte(change.withdrawLUSD)\n                ? Decimal_1.Decimal.ZERO\n                : this.currentLUSD.sub(change.withdrawLUSD);\n        }\n        else {\n            return this.currentLUSD.add(change.depositLUSD);\n        }\n    }\n}\nexports.StabilityDeposit = StabilityDeposit;\n//# sourceMappingURL=StabilityDeposit.js.map"]},"metadata":{},"sourceType":"script"}