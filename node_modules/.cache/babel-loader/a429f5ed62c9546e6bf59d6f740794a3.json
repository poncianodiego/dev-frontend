{"ast":null,"code":"var _jsxFileName = \"/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/src/components/RiskyTroves.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport CopyToClipboard from \"react-copy-to-clipboard\";\nimport { Card, Button, Text, Box, Heading, Flex } from \"theme-ui\";\nimport { Percent, MINIMUM_COLLATERAL_RATIO, CRITICAL_COLLATERAL_RATIO } from \"@liquity/lib-base\";\nimport { useLiquitySelector } from \"@liquity/lib-react\";\nimport { shortenAddress } from \"../utils/shortenAddress\";\nimport { useLiquity } from \"../hooks/LiquityContext\";\nimport { COIN } from \"../strings\";\nimport { Icon } from \"./Icon\";\nimport { LoadingOverlay } from \"./LoadingOverlay\";\nimport { Transaction } from \"./Transaction\";\nimport { Tooltip } from \"./Tooltip\";\nimport { Abbreviation } from \"./Abbreviation\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst rowHeight = \"40px\";\n\nconst liquidatableInNormalMode = (trove, price) => [trove.collateralRatioIsBelowMinimum(price), \"Collateral ratio not low enough\"];\n\nconst liquidatableInRecoveryMode = (trove, price, totalCollateralRatio, lusdInStabilityPool) => {\n  const collateralRatio = trove.collateralRatio(price);\n\n  if (collateralRatio.gte(MINIMUM_COLLATERAL_RATIO) && collateralRatio.lt(totalCollateralRatio)) {\n    return [trove.debt.lte(lusdInStabilityPool), \"There's not enough LUSD in the Stability pool to cover the debt\"];\n  } else {\n    return liquidatableInNormalMode(trove, price);\n  }\n};\n\nconst select = ({\n  numberOfTroves,\n  price,\n  total,\n  lusdInStabilityPool,\n  blockTag\n}) => ({\n  numberOfTroves,\n  price,\n  recoveryMode: total.collateralRatioIsBelowCritical(price),\n  totalCollateralRatio: total.collateralRatio(price),\n  lusdInStabilityPool,\n  blockTag\n});\n\nexport const RiskyTroves = ({\n  pageSize\n}) => {\n  _s();\n\n  const {\n    blockTag,\n    numberOfTroves,\n    recoveryMode,\n    totalCollateralRatio,\n    lusdInStabilityPool,\n    price\n  } = useLiquitySelector(select);\n  const {\n    liquity\n  } = useLiquity();\n  const [loading, setLoading] = useState(true);\n  const [troves, setTroves] = useState();\n  const [reload, setReload] = useState({});\n  const forceReload = useCallback(() => setReload({}), []);\n  const [page, setPage] = useState(0);\n  const numberOfPages = Math.ceil(numberOfTroves / pageSize) || 1;\n  const clampedPage = Math.min(page, numberOfPages - 1);\n\n  const nextPage = () => {\n    if (clampedPage < numberOfPages - 1) {\n      setPage(clampedPage + 1);\n    }\n  };\n\n  const previousPage = () => {\n    if (clampedPage > 0) {\n      setPage(clampedPage - 1);\n    }\n  };\n\n  useEffect(() => {\n    if (page !== clampedPage) {\n      setPage(clampedPage);\n    }\n  }, [page, clampedPage]);\n  useEffect(() => {\n    let mounted = true;\n    setLoading(true);\n    liquity.getTroves({\n      first: pageSize,\n      sortedBy: \"ascendingCollateralRatio\",\n      startingAt: clampedPage * pageSize\n    }, {\n      blockTag\n    }).then(troves => {\n      if (mounted) {\n        setTroves(troves);\n        setLoading(false);\n      }\n    });\n    return () => {\n      mounted = false;\n    }; // Omit blockTag from deps on purpose\n    // eslint-disable-next-line\n  }, [liquity, clampedPage, pageSize, reload]);\n  useEffect(() => {\n    forceReload();\n  }, [forceReload, numberOfTroves]);\n  const [copied, setCopied] = useState();\n  useEffect(() => {\n    if (copied !== undefined) {\n      let cancelled = false;\n      setTimeout(() => {\n        if (!cancelled) {\n          setCopied(undefined);\n        }\n      }, 2000);\n      return () => {\n        cancelled = true;\n      };\n    }\n  }, [copied]);\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      width: \"100%\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(Heading, {\n      children: [/*#__PURE__*/_jsxDEV(Abbreviation, {\n        short: \"Troves\",\n        children: \"Risky Troves\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Flex, {\n        sx: {\n          alignItems: \"center\"\n        },\n        children: [numberOfTroves !== 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Abbreviation, {\n            short: `page ${clampedPage + 1} / ${numberOfPages}`,\n            sx: {\n              mr: [0, 3],\n              fontWeight: \"body\",\n              fontSize: [1, 2],\n              letterSpacing: [-1, 0]\n            },\n            children: [clampedPage * pageSize + 1, \"-\", Math.min((clampedPage + 1) * pageSize, numberOfTroves), \" \", \"of \", numberOfTroves]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"titleIcon\",\n            onClick: previousPage,\n            disabled: clampedPage <= 0,\n            children: /*#__PURE__*/_jsxDEV(Icon, {\n              name: \"chevron-left\",\n              size: \"lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"titleIcon\",\n            onClick: nextPage,\n            disabled: clampedPage >= numberOfPages - 1,\n            children: /*#__PURE__*/_jsxDEV(Icon, {\n              name: \"chevron-right\",\n              size: \"lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"titleIcon\",\n          sx: {\n            opacity: loading ? 0 : 1,\n            ml: [0, 3]\n          },\n          onClick: forceReload,\n          children: /*#__PURE__*/_jsxDEV(Icon, {\n            name: \"redo\",\n            size: \"lg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), !troves || troves.length === 0 ? /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: [2, 3]\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 4,\n          fontSize: 3,\n          textAlign: \"center\"\n        },\n        children: !troves ? \"Loading...\" : \"There are no Troves yet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: [2, 3]\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        as: \"table\",\n        sx: {\n          mt: 2,\n          pl: [1, 4],\n          width: \"100%\",\n          textAlign: \"center\",\n          lineHeight: 1.15\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"colgroup\", {\n          children: [/*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: \"50px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"col\", {\n            style: {\n              width: rowHeight\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Owner\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: [/*#__PURE__*/_jsxDEV(Abbreviation, {\n                short: \"Coll.\",\n                children: \"Collateral\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  fontSize: [0, 1],\n                  fontWeight: \"body\",\n                  opacity: 0.5\n                },\n                children: \"ETH\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: [\"Debt\", /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  fontSize: [0, 1],\n                  fontWeight: \"body\",\n                  opacity: 0.5\n                },\n                children: COIN\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: [\"Coll.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this), \"Ratio\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: troves.map(trove => !trove.isEmpty &&\n          /*#__PURE__*/\n          // making sure the Trove hasn't been liquidated\n          // (TODO: remove check after we can fetch multiple Troves in one call)\n          _jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                display: \"flex\",\n                alignItems: \"center\",\n                height: rowHeight\n              },\n              children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n                message: trove.ownerAddress,\n                placement: \"top\",\n                children: /*#__PURE__*/_jsxDEV(Text, {\n                  variant: \"address\",\n                  sx: {\n                    width: [\"73px\", \"unset\"],\n                    overflow: \"hidden\",\n                    position: \"relative\"\n                  },\n                  children: [shortenAddress(trove.ownerAddress), /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: [\"block\", \"none\"],\n                      position: \"absolute\",\n                      top: 0,\n                      right: 0,\n                      width: \"50px\",\n                      height: \"100%\",\n                      background: \"linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 266,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 257,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(CopyToClipboard, {\n                text: trove.ownerAddress,\n                onCopy: () => setCopied(trove.ownerAddress),\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"icon\",\n                  sx: {\n                    width: \"24px\",\n                    height: \"24px\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Icon, {\n                    name: copied === trove.ownerAddress ? \"clipboard-check\" : \"clipboard\",\n                    size: \"sm\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Abbreviation, {\n                short: trove.collateral.shorten(),\n                children: trove.collateral.prettify(4)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Abbreviation, {\n                short: trove.debt.shorten(),\n                children: trove.debt.prettify()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: (collateralRatio => /*#__PURE__*/_jsxDEV(Text, {\n                color: collateralRatio.gt(CRITICAL_COLLATERAL_RATIO) ? \"success\" : collateralRatio.gt(1.2) ? \"warning\" : \"danger\",\n                children: new Percent(collateralRatio).prettify()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 27\n              }, this))(trove.collateralRatio(price))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Transaction, {\n                id: `liquidate-${trove.ownerAddress}`,\n                tooltip: \"Liquidate\",\n                requires: [recoveryMode ? liquidatableInRecoveryMode(trove, price, totalCollateralRatio, lusdInStabilityPool) : liquidatableInNormalMode(trove, price)],\n                send: liquity.send.liquidate.bind(liquity.send, trove.ownerAddress),\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"dangerIcon\",\n                  children: /*#__PURE__*/_jsxDEV(Icon, {\n                    name: \"trash\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 335,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 319,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 23\n            }, this)]\n          }, trove.ownerAddress, true, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }, this), loading && /*#__PURE__*/_jsxDEV(LoadingOverlay, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RiskyTroves, \"SVVe68zdkLW/v1mOkfonQSKuWSw=\", false, function () {\n  return [useLiquitySelector, useLiquity];\n});\n\n_c = RiskyTroves;\n\nvar _c;\n\n$RefreshReg$(_c, \"RiskyTroves\");","map":{"version":3,"sources":["/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/src/components/RiskyTroves.tsx"],"names":["React","useState","useEffect","useCallback","CopyToClipboard","Card","Button","Text","Box","Heading","Flex","Percent","MINIMUM_COLLATERAL_RATIO","CRITICAL_COLLATERAL_RATIO","useLiquitySelector","shortenAddress","useLiquity","COIN","Icon","LoadingOverlay","Transaction","Tooltip","Abbreviation","rowHeight","liquidatableInNormalMode","trove","price","collateralRatioIsBelowMinimum","liquidatableInRecoveryMode","totalCollateralRatio","lusdInStabilityPool","collateralRatio","gte","lt","debt","lte","select","numberOfTroves","total","blockTag","recoveryMode","collateralRatioIsBelowCritical","RiskyTroves","pageSize","liquity","loading","setLoading","troves","setTroves","reload","setReload","forceReload","page","setPage","numberOfPages","Math","ceil","clampedPage","min","nextPage","previousPage","mounted","getTroves","first","sortedBy","startingAt","then","copied","setCopied","undefined","cancelled","setTimeout","width","alignItems","mr","fontWeight","fontSize","letterSpacing","opacity","ml","length","p","textAlign","mt","pl","lineHeight","map","isEmpty","display","height","ownerAddress","overflow","position","top","right","background","collateral","shorten","prettify","gt","send","liquidate","bind"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,WAArC,QAAwD,OAAxD;AACA,OAAOC,eAAP,MAA4B,yBAA5B;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,IAAvB,EAA6BC,GAA7B,EAAkCC,OAAlC,EAA2CC,IAA3C,QAAuD,UAAvD;AAEA,SACEC,OADF,EAEEC,wBAFF,EAGEC,yBAHF,QAMO,mBANP;AAQA,SAASC,kBAAT,QAAmC,oBAAnC;AAEA,SAASC,cAAT,QAA+B,yBAA/B;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,SAASC,IAAT,QAAqB,YAArB;AAEA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,cAAT,QAA+B,kBAA/B;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,YAAT,QAA6B,gBAA7B;;;AAEA,MAAMC,SAAS,GAAG,MAAlB;;AAEA,MAAMC,wBAAwB,GAAG,CAACC,KAAD,EAAmBC,KAAnB,KAC/B,CAACD,KAAK,CAACE,6BAAN,CAAoCD,KAApC,CAAD,EAA6C,iCAA7C,CADF;;AAGA,MAAME,0BAA0B,GAAG,CACjCH,KADiC,EAEjCC,KAFiC,EAGjCG,oBAHiC,EAIjCC,mBAJiC,KAK9B;AACH,QAAMC,eAAe,GAAGN,KAAK,CAACM,eAAN,CAAsBL,KAAtB,CAAxB;;AAEA,MAAIK,eAAe,CAACC,GAAhB,CAAoBpB,wBAApB,KAAiDmB,eAAe,CAACE,EAAhB,CAAmBJ,oBAAnB,CAArD,EAA+F;AAC7F,WAAO,CACLJ,KAAK,CAACS,IAAN,CAAWC,GAAX,CAAeL,mBAAf,CADK,EAEL,iEAFK,CAAP;AAID,GALD,MAKO;AACL,WAAON,wBAAwB,CAACC,KAAD,EAAQC,KAAR,CAA/B;AACD;AACF,CAhBD;;AAsBA,MAAMU,MAAM,GAAG,CAAC;AACdC,EAAAA,cADc;AAEdX,EAAAA,KAFc;AAGdY,EAAAA,KAHc;AAIdR,EAAAA,mBAJc;AAKdS,EAAAA;AALc,CAAD,MAMsB;AACnCF,EAAAA,cADmC;AAEnCX,EAAAA,KAFmC;AAGnCc,EAAAA,YAAY,EAAEF,KAAK,CAACG,8BAAN,CAAqCf,KAArC,CAHqB;AAInCG,EAAAA,oBAAoB,EAAES,KAAK,CAACP,eAAN,CAAsBL,KAAtB,CAJa;AAKnCI,EAAAA,mBALmC;AAMnCS,EAAAA;AANmC,CANtB,CAAf;;AAeA,OAAO,MAAMG,WAAuC,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAAA;;AACvE,QAAM;AACJJ,IAAAA,QADI;AAEJF,IAAAA,cAFI;AAGJG,IAAAA,YAHI;AAIJX,IAAAA,oBAJI;AAKJC,IAAAA,mBALI;AAMJJ,IAAAA;AANI,MAOFZ,kBAAkB,CAACsB,MAAD,CAPtB;AAQA,QAAM;AAAEQ,IAAAA;AAAF,MAAc5B,UAAU,EAA9B;AAEA,QAAM,CAAC6B,OAAD,EAAUC,UAAV,IAAwB7C,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAAC8C,MAAD,EAASC,SAAT,IAAsB/C,QAAQ,EAApC;AAEA,QAAM,CAACgD,MAAD,EAASC,SAAT,IAAsBjD,QAAQ,CAAC,EAAD,CAApC;AACA,QAAMkD,WAAW,GAAGhD,WAAW,CAAC,MAAM+C,SAAS,CAAC,EAAD,CAAhB,EAAsB,EAAtB,CAA/B;AAEA,QAAM,CAACE,IAAD,EAAOC,OAAP,IAAkBpD,QAAQ,CAAC,CAAD,CAAhC;AACA,QAAMqD,aAAa,GAAGC,IAAI,CAACC,IAAL,CAAUnB,cAAc,GAAGM,QAA3B,KAAwC,CAA9D;AACA,QAAMc,WAAW,GAAGF,IAAI,CAACG,GAAL,CAASN,IAAT,EAAeE,aAAa,GAAG,CAA/B,CAApB;;AAEA,QAAMK,QAAQ,GAAG,MAAM;AACrB,QAAIF,WAAW,GAAGH,aAAa,GAAG,CAAlC,EAAqC;AACnCD,MAAAA,OAAO,CAACI,WAAW,GAAG,CAAf,CAAP;AACD;AACF,GAJD;;AAMA,QAAMG,YAAY,GAAG,MAAM;AACzB,QAAIH,WAAW,GAAG,CAAlB,EAAqB;AACnBJ,MAAAA,OAAO,CAACI,WAAW,GAAG,CAAf,CAAP;AACD;AACF,GAJD;;AAMAvD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIkD,IAAI,KAAKK,WAAb,EAA0B;AACxBJ,MAAAA,OAAO,CAACI,WAAD,CAAP;AACD;AACF,GAJQ,EAIN,CAACL,IAAD,EAAOK,WAAP,CAJM,CAAT;AAMAvD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI2D,OAAO,GAAG,IAAd;AAEAf,IAAAA,UAAU,CAAC,IAAD,CAAV;AAEAF,IAAAA,OAAO,CACJkB,SADH,CAEI;AACEC,MAAAA,KAAK,EAAEpB,QADT;AAEEqB,MAAAA,QAAQ,EAAE,0BAFZ;AAGEC,MAAAA,UAAU,EAAER,WAAW,GAAGd;AAH5B,KAFJ,EAOI;AAAEJ,MAAAA;AAAF,KAPJ,EASG2B,IATH,CASQnB,MAAM,IAAI;AACd,UAAIc,OAAJ,EAAa;AACXb,QAAAA,SAAS,CAACD,MAAD,CAAT;AACAD,QAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,KAdH;AAgBA,WAAO,MAAM;AACXe,MAAAA,OAAO,GAAG,KAAV;AACD,KAFD,CArBc,CAwBd;AACA;AACD,GA1BQ,EA0BN,CAACjB,OAAD,EAAUa,WAAV,EAAuBd,QAAvB,EAAiCM,MAAjC,CA1BM,CAAT;AA4BA/C,EAAAA,SAAS,CAAC,MAAM;AACdiD,IAAAA,WAAW;AACZ,GAFQ,EAEN,CAACA,WAAD,EAAcd,cAAd,CAFM,CAAT;AAIA,QAAM,CAAC8B,MAAD,EAASC,SAAT,IAAsBnE,QAAQ,EAApC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIiE,MAAM,KAAKE,SAAf,EAA0B;AACxB,UAAIC,SAAS,GAAG,KAAhB;AAEAC,MAAAA,UAAU,CAAC,MAAM;AACf,YAAI,CAACD,SAAL,EAAgB;AACdF,UAAAA,SAAS,CAACC,SAAD,CAAT;AACD;AACF,OAJS,EAIP,IAJO,CAAV;AAMA,aAAO,MAAM;AACXC,QAAAA,SAAS,GAAG,IAAZ;AACD,OAFD;AAGD;AACF,GAdQ,EAcN,CAACH,MAAD,CAdM,CAAT;AAgBA,sBACE,QAAC,IAAD;AAAM,IAAA,EAAE,EAAE;AAAEK,MAAAA,KAAK,EAAE;AAAT,KAAV;AAAA,4BACE,QAAC,OAAD;AAAA,8BACE,QAAC,YAAD;AAAc,QAAA,KAAK,EAAC,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAGE,QAAC,IAAD;AAAM,QAAA,EAAE,EAAE;AAAEC,UAAAA,UAAU,EAAE;AAAd,SAAV;AAAA,mBACGpC,cAAc,KAAK,CAAnB,iBACC;AAAA,kCACE,QAAC,YAAD;AACE,YAAA,KAAK,EAAG,QAAOoB,WAAW,GAAG,CAAE,MAAKH,aAAc,EADpD;AAEE,YAAA,EAAE,EAAE;AAAEoB,cAAAA,EAAE,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAN;AAAcC,cAAAA,UAAU,EAAE,MAA1B;AAAkCC,cAAAA,QAAQ,EAAE,CAAC,CAAD,EAAI,CAAJ,CAA5C;AAAoDC,cAAAA,aAAa,EAAE,CAAC,CAAC,CAAF,EAAK,CAAL;AAAnE,aAFN;AAAA,uBAIGpB,WAAW,GAAGd,QAAd,GAAyB,CAJ5B,OAIgCY,IAAI,CAACG,GAAL,CAAS,CAACD,WAAW,GAAG,CAAf,IAAoBd,QAA7B,EAAuCN,cAAvC,CAJhC,EAIwF,GAJxF,SAKMA,cALN;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eASE,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAC,WAAhB;AAA4B,YAAA,OAAO,EAAEuB,YAArC;AAAmD,YAAA,QAAQ,EAAEH,WAAW,IAAI,CAA5E;AAAA,mCACE,QAAC,IAAD;AAAM,cAAA,IAAI,EAAC,cAAX;AAA0B,cAAA,IAAI,EAAC;AAA/B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBATF,eAaE,QAAC,MAAD;AACE,YAAA,OAAO,EAAC,WADV;AAEE,YAAA,OAAO,EAAEE,QAFX;AAGE,YAAA,QAAQ,EAAEF,WAAW,IAAIH,aAAa,GAAG,CAH3C;AAAA,mCAKE,QAAC,IAAD;AAAM,cAAA,IAAI,EAAC,eAAX;AAA2B,cAAA,IAAI,EAAC;AAAhC;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,kBAbF;AAAA,wBAFJ,eAyBE,QAAC,MAAD;AACE,UAAA,OAAO,EAAC,WADV;AAEE,UAAA,EAAE,EAAE;AAAEwB,YAAAA,OAAO,EAAEjC,OAAO,GAAG,CAAH,GAAO,CAAzB;AAA4BkC,YAAAA,EAAE,EAAE,CAAC,CAAD,EAAI,CAAJ;AAAhC,WAFN;AAGE,UAAA,OAAO,EAAE5B,WAHX;AAAA,iCAKE,QAAC,IAAD;AAAM,YAAA,IAAI,EAAC,MAAX;AAAkB,YAAA,IAAI,EAAC;AAAvB;AAAA;AAAA;AAAA;AAAA;AALF;AAAA;AAAA;AAAA;AAAA,gBAzBF;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAuCG,CAACJ,MAAD,IAAWA,MAAM,CAACiC,MAAP,KAAkB,CAA7B,gBACC,QAAC,GAAD;AAAK,MAAA,EAAE,EAAE;AAAEC,QAAAA,CAAC,EAAE,CAAC,CAAD,EAAI,CAAJ;AAAL,OAAT;AAAA,6BACE,QAAC,GAAD;AAAK,QAAA,EAAE,EAAE;AAAEA,UAAAA,CAAC,EAAE,CAAL;AAAQL,UAAAA,QAAQ,EAAE,CAAlB;AAAqBM,UAAAA,SAAS,EAAE;AAAhC,SAAT;AAAA,kBACG,CAACnC,MAAD,GAAU,YAAV,GAAyB;AAD5B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADD,gBAOC,QAAC,GAAD;AAAK,MAAA,EAAE,EAAE;AAAEkC,QAAAA,CAAC,EAAE,CAAC,CAAD,EAAI,CAAJ;AAAL,OAAT;AAAA,6BACE,QAAC,GAAD;AACE,QAAA,EAAE,EAAC,OADL;AAEE,QAAA,EAAE,EAAE;AACFE,UAAAA,EAAE,EAAE,CADF;AAEFC,UAAAA,EAAE,EAAE,CAAC,CAAD,EAAI,CAAJ,CAFF;AAGFZ,UAAAA,KAAK,EAAE,MAHL;AAKFU,UAAAA,SAAS,EAAE,QALT;AAMFG,UAAAA,UAAU,EAAE;AANV,SAFN;AAAA,gCAWE;AAAA,kCACE;AAAK,YAAA,KAAK,EAAE;AAAEb,cAAAA,KAAK,EAAE;AAAT;AAAZ;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AAAA;AAAA;AAAA;AAAA,kBAHF,eAIE;AAAA;AAAA;AAAA;AAAA,kBAJF,eAKE;AAAK,YAAA,KAAK,EAAE;AAAEA,cAAAA,KAAK,EAAEjD;AAAT;AAAZ;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXF,eAmBE;AAAA,iCACE;AAAA,oCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA,sCACE,QAAC,YAAD;AAAc,gBAAA,KAAK,EAAC,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAEE,QAAC,GAAD;AAAK,gBAAA,EAAE,EAAE;AAAEqD,kBAAAA,QAAQ,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAZ;AAAoBD,kBAAAA,UAAU,EAAE,MAAhC;AAAwCG,kBAAAA,OAAO,EAAE;AAAjD,iBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,eAME;AAAA,8CAEE,QAAC,GAAD;AAAK,gBAAA,EAAE,EAAE;AAAEF,kBAAAA,QAAQ,EAAE,CAAC,CAAD,EAAI,CAAJ,CAAZ;AAAoBD,kBAAAA,UAAU,EAAE,MAAhC;AAAwCG,kBAAAA,OAAO,EAAE;AAAjD,iBAAT;AAAA,0BAAkE7D;AAAlE;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBANF,eAUE;AAAA,+CAEE;AAAA;AAAA;AAAA;AAAA,sBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVF,eAeE;AAAA;AAAA;AAAA;AAAA,oBAfF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAnBF,eAuCE;AAAA,oBACG8B,MAAM,CAACuC,GAAP,CACC7D,KAAK,IACH,CAACA,KAAK,CAAC8D,OAAP;AAAA;AAAoB;AAClB;AACA;AAAA,oCACE;AACE,cAAA,KAAK,EAAE;AACLC,gBAAAA,OAAO,EAAE,MADJ;AAELf,gBAAAA,UAAU,EAAE,QAFP;AAGLgB,gBAAAA,MAAM,EAAElE;AAHH,eADT;AAAA,sCAOE,QAAC,OAAD;AAAS,gBAAA,OAAO,EAAEE,KAAK,CAACiE,YAAxB;AAAsC,gBAAA,SAAS,EAAC,KAAhD;AAAA,uCACE,QAAC,IAAD;AACE,kBAAA,OAAO,EAAC,SADV;AAEE,kBAAA,EAAE,EAAE;AACFlB,oBAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,OAAT,CADL;AAEFmB,oBAAAA,QAAQ,EAAE,QAFR;AAGFC,oBAAAA,QAAQ,EAAE;AAHR,mBAFN;AAAA,6BAQG7E,cAAc,CAACU,KAAK,CAACiE,YAAP,CARjB,eASE,QAAC,GAAD;AACE,oBAAA,EAAE,EAAE;AACFF,sBAAAA,OAAO,EAAE,CAAC,OAAD,EAAU,MAAV,CADP;AAEFI,sBAAAA,QAAQ,EAAE,UAFR;AAGFC,sBAAAA,GAAG,EAAE,CAHH;AAIFC,sBAAAA,KAAK,EAAE,CAJL;AAKFtB,sBAAAA,KAAK,EAAE,MALL;AAMFiB,sBAAAA,MAAM,EAAE,MANN;AAOFM,sBAAAA,UAAU,EACR;AARA;AADN;AAAA;AAAA;AAAA;AAAA,0BATF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAPF,eAgCE,QAAC,eAAD;AACE,gBAAA,IAAI,EAAEtE,KAAK,CAACiE,YADd;AAEE,gBAAA,MAAM,EAAE,MAAMtB,SAAS,CAAC3C,KAAK,CAACiE,YAAP,CAFzB;AAAA,uCAIE,QAAC,MAAD;AAAQ,kBAAA,OAAO,EAAC,MAAhB;AAAuB,kBAAA,EAAE,EAAE;AAAElB,oBAAAA,KAAK,EAAE,MAAT;AAAiBiB,oBAAAA,MAAM,EAAE;AAAzB,mBAA3B;AAAA,yCACE,QAAC,IAAD;AACE,oBAAA,IAAI,EAAEtB,MAAM,KAAK1C,KAAK,CAACiE,YAAjB,GAAgC,iBAAhC,GAAoD,WAD5D;AAEE,oBAAA,IAAI,EAAC;AAFP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAJF;AAAA;AAAA;AAAA;AAAA,sBAhCF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eA6CE;AAAA,qCACE,QAAC,YAAD;AAAc,gBAAA,KAAK,EAAEjE,KAAK,CAACuE,UAAN,CAAiBC,OAAjB,EAArB;AAAA,0BACGxE,KAAK,CAACuE,UAAN,CAAiBE,QAAjB,CAA0B,CAA1B;AADH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBA7CF,eAkDE;AAAA,qCACE,QAAC,YAAD;AAAc,gBAAA,KAAK,EAAEzE,KAAK,CAACS,IAAN,CAAW+D,OAAX,EAArB;AAAA,0BACGxE,KAAK,CAACS,IAAN,CAAWgE,QAAX;AADH;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAlDF,eAuDE;AAAA,wBACG,CAACnE,eAAe,iBACf,QAAC,IAAD;AACE,gBAAA,KAAK,EACHA,eAAe,CAACoE,EAAhB,CAAmBtF,yBAAnB,IACI,SADJ,GAEIkB,eAAe,CAACoE,EAAhB,CAAmB,GAAnB,IACA,SADA,GAEA,QANR;AAAA,0BASG,IAAIxF,OAAJ,CAAYoB,eAAZ,EAA6BmE,QAA7B;AATH;AAAA;AAAA;AAAA;AAAA,sBADD,EAYEzE,KAAK,CAACM,eAAN,CAAsBL,KAAtB,CAZF;AADH;AAAA;AAAA;AAAA;AAAA,oBAvDF,eAsEE;AAAA,qCACE,QAAC,WAAD;AACE,gBAAA,EAAE,EAAG,aAAYD,KAAK,CAACiE,YAAa,EADtC;AAEE,gBAAA,OAAO,EAAC,WAFV;AAGE,gBAAA,QAAQ,EAAE,CACRlD,YAAY,GACRZ,0BAA0B,CACxBH,KADwB,EAExBC,KAFwB,EAGxBG,oBAHwB,EAIxBC,mBAJwB,CADlB,GAORN,wBAAwB,CAACC,KAAD,EAAQC,KAAR,CARpB,CAHZ;AAaE,gBAAA,IAAI,EAAEkB,OAAO,CAACwD,IAAR,CAAaC,SAAb,CAAuBC,IAAvB,CAA4B1D,OAAO,CAACwD,IAApC,EAA0C3E,KAAK,CAACiE,YAAhD,CAbR;AAAA,uCAeE,QAAC,MAAD;AAAQ,kBAAA,OAAO,EAAC,YAAhB;AAAA,yCACE,QAAC,IAAD;AAAM,oBAAA,IAAI,EAAC;AAAX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAfF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAtEF;AAAA,aAASjE,KAAK,CAACiE,YAAf;AAAA;AAAA;AAAA;AAAA,kBAJL;AADH;AAAA;AAAA;AAAA;AAAA,gBAvCF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YA9CJ,EA8LG7C,OAAO,iBAAI,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA,YA9Ld;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAkMD,CA3RM;;GAAMH,W;UAQP5B,kB,EACgBE,U;;;KATT0B,W","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\nimport CopyToClipboard from \"react-copy-to-clipboard\";\nimport { Card, Button, Text, Box, Heading, Flex } from \"theme-ui\";\n\nimport {\n  Percent,\n  MINIMUM_COLLATERAL_RATIO,\n  CRITICAL_COLLATERAL_RATIO,\n  UserTrove,\n  Decimal\n} from \"@liquity/lib-base\";\nimport { BlockPolledLiquityStoreState } from \"@liquity/lib-ethers\";\nimport { useLiquitySelector } from \"@liquity/lib-react\";\n\nimport { shortenAddress } from \"../utils/shortenAddress\";\nimport { useLiquity } from \"../hooks/LiquityContext\";\nimport { COIN } from \"../strings\";\n\nimport { Icon } from \"./Icon\";\nimport { LoadingOverlay } from \"./LoadingOverlay\";\nimport { Transaction } from \"./Transaction\";\nimport { Tooltip } from \"./Tooltip\";\nimport { Abbreviation } from \"./Abbreviation\";\n\nconst rowHeight = \"40px\";\n\nconst liquidatableInNormalMode = (trove: UserTrove, price: Decimal) =>\n  [trove.collateralRatioIsBelowMinimum(price), \"Collateral ratio not low enough\"] as const;\n\nconst liquidatableInRecoveryMode = (\n  trove: UserTrove,\n  price: Decimal,\n  totalCollateralRatio: Decimal,\n  lusdInStabilityPool: Decimal\n) => {\n  const collateralRatio = trove.collateralRatio(price);\n\n  if (collateralRatio.gte(MINIMUM_COLLATERAL_RATIO) && collateralRatio.lt(totalCollateralRatio)) {\n    return [\n      trove.debt.lte(lusdInStabilityPool),\n      \"There's not enough LUSD in the Stability pool to cover the debt\"\n    ] as const;\n  } else {\n    return liquidatableInNormalMode(trove, price);\n  }\n};\n\ntype RiskyTrovesProps = {\n  pageSize: number;\n};\n\nconst select = ({\n  numberOfTroves,\n  price,\n  total,\n  lusdInStabilityPool,\n  blockTag\n}: BlockPolledLiquityStoreState) => ({\n  numberOfTroves,\n  price,\n  recoveryMode: total.collateralRatioIsBelowCritical(price),\n  totalCollateralRatio: total.collateralRatio(price),\n  lusdInStabilityPool,\n  blockTag\n});\n\nexport const RiskyTroves: React.FC<RiskyTrovesProps> = ({ pageSize }) => {\n  const {\n    blockTag,\n    numberOfTroves,\n    recoveryMode,\n    totalCollateralRatio,\n    lusdInStabilityPool,\n    price\n  } = useLiquitySelector(select);\n  const { liquity } = useLiquity();\n\n  const [loading, setLoading] = useState(true);\n  const [troves, setTroves] = useState<UserTrove[]>();\n\n  const [reload, setReload] = useState({});\n  const forceReload = useCallback(() => setReload({}), []);\n\n  const [page, setPage] = useState(0);\n  const numberOfPages = Math.ceil(numberOfTroves / pageSize) || 1;\n  const clampedPage = Math.min(page, numberOfPages - 1);\n\n  const nextPage = () => {\n    if (clampedPage < numberOfPages - 1) {\n      setPage(clampedPage + 1);\n    }\n  };\n\n  const previousPage = () => {\n    if (clampedPage > 0) {\n      setPage(clampedPage - 1);\n    }\n  };\n\n  useEffect(() => {\n    if (page !== clampedPage) {\n      setPage(clampedPage);\n    }\n  }, [page, clampedPage]);\n\n  useEffect(() => {\n    let mounted = true;\n\n    setLoading(true);\n\n    liquity\n      .getTroves(\n        {\n          first: pageSize,\n          sortedBy: \"ascendingCollateralRatio\",\n          startingAt: clampedPage * pageSize\n        },\n        { blockTag }\n      )\n      .then(troves => {\n        if (mounted) {\n          setTroves(troves);\n          setLoading(false);\n        }\n      });\n\n    return () => {\n      mounted = false;\n    };\n    // Omit blockTag from deps on purpose\n    // eslint-disable-next-line\n  }, [liquity, clampedPage, pageSize, reload]);\n\n  useEffect(() => {\n    forceReload();\n  }, [forceReload, numberOfTroves]);\n\n  const [copied, setCopied] = useState<string>();\n\n  useEffect(() => {\n    if (copied !== undefined) {\n      let cancelled = false;\n\n      setTimeout(() => {\n        if (!cancelled) {\n          setCopied(undefined);\n        }\n      }, 2000);\n\n      return () => {\n        cancelled = true;\n      };\n    }\n  }, [copied]);\n\n  return (\n    <Card sx={{ width: \"100%\" }}>\n      <Heading>\n        <Abbreviation short=\"Troves\">Risky Troves</Abbreviation>\n\n        <Flex sx={{ alignItems: \"center\" }}>\n          {numberOfTroves !== 0 && (\n            <>\n              <Abbreviation\n                short={`page ${clampedPage + 1} / ${numberOfPages}`}\n                sx={{ mr: [0, 3], fontWeight: \"body\", fontSize: [1, 2], letterSpacing: [-1, 0] }}\n              >\n                {clampedPage * pageSize + 1}-{Math.min((clampedPage + 1) * pageSize, numberOfTroves)}{\" \"}\n                of {numberOfTroves}\n              </Abbreviation>\n\n              <Button variant=\"titleIcon\" onClick={previousPage} disabled={clampedPage <= 0}>\n                <Icon name=\"chevron-left\" size=\"lg\" />\n              </Button>\n\n              <Button\n                variant=\"titleIcon\"\n                onClick={nextPage}\n                disabled={clampedPage >= numberOfPages - 1}\n              >\n                <Icon name=\"chevron-right\" size=\"lg\" />\n              </Button>\n            </>\n          )}\n\n          <Button\n            variant=\"titleIcon\"\n            sx={{ opacity: loading ? 0 : 1, ml: [0, 3] }}\n            onClick={forceReload}\n          >\n            <Icon name=\"redo\" size=\"lg\" />\n          </Button>\n        </Flex>\n      </Heading>\n\n      {!troves || troves.length === 0 ? (\n        <Box sx={{ p: [2, 3] }}>\n          <Box sx={{ p: 4, fontSize: 3, textAlign: \"center\" }}>\n            {!troves ? \"Loading...\" : \"There are no Troves yet\"}\n          </Box>\n        </Box>\n      ) : (\n        <Box sx={{ p: [2, 3] }}>\n          <Box\n            as=\"table\"\n            sx={{\n              mt: 2,\n              pl: [1, 4],\n              width: \"100%\",\n\n              textAlign: \"center\",\n              lineHeight: 1.15\n            }}\n          >\n            <colgroup>\n              <col style={{ width: \"50px\" }} />\n              <col />\n              <col />\n              <col />\n              <col style={{ width: rowHeight }} />\n            </colgroup>\n\n            <thead>\n              <tr>\n                <th>Owner</th>\n                <th>\n                  <Abbreviation short=\"Coll.\">Collateral</Abbreviation>\n                  <Box sx={{ fontSize: [0, 1], fontWeight: \"body\", opacity: 0.5 }}>ETH</Box>\n                </th>\n                <th>\n                  Debt\n                  <Box sx={{ fontSize: [0, 1], fontWeight: \"body\", opacity: 0.5 }}>{COIN}</Box>\n                </th>\n                <th>\n                  Coll.\n                  <br />\n                  Ratio\n                </th>\n                <th></th>\n              </tr>\n            </thead>\n\n            <tbody>\n              {troves.map(\n                trove =>\n                  !trove.isEmpty && ( // making sure the Trove hasn't been liquidated\n                    // (TODO: remove check after we can fetch multiple Troves in one call)\n                    <tr key={trove.ownerAddress}>\n                      <td\n                        style={{\n                          display: \"flex\",\n                          alignItems: \"center\",\n                          height: rowHeight\n                        }}\n                      >\n                        <Tooltip message={trove.ownerAddress} placement=\"top\">\n                          <Text\n                            variant=\"address\"\n                            sx={{\n                              width: [\"73px\", \"unset\"],\n                              overflow: \"hidden\",\n                              position: \"relative\"\n                            }}\n                          >\n                            {shortenAddress(trove.ownerAddress)}\n                            <Box\n                              sx={{\n                                display: [\"block\", \"none\"],\n                                position: \"absolute\",\n                                top: 0,\n                                right: 0,\n                                width: \"50px\",\n                                height: \"100%\",\n                                background:\n                                  \"linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)\"\n                              }}\n                            />\n                          </Text>\n                        </Tooltip>\n\n                        <CopyToClipboard\n                          text={trove.ownerAddress}\n                          onCopy={() => setCopied(trove.ownerAddress)}\n                        >\n                          <Button variant=\"icon\" sx={{ width: \"24px\", height: \"24px\" }}>\n                            <Icon\n                              name={copied === trove.ownerAddress ? \"clipboard-check\" : \"clipboard\"}\n                              size=\"sm\"\n                            />\n                          </Button>\n                        </CopyToClipboard>\n                      </td>\n                      <td>\n                        <Abbreviation short={trove.collateral.shorten()}>\n                          {trove.collateral.prettify(4)}\n                        </Abbreviation>\n                      </td>\n                      <td>\n                        <Abbreviation short={trove.debt.shorten()}>\n                          {trove.debt.prettify()}\n                        </Abbreviation>\n                      </td>\n                      <td>\n                        {(collateralRatio => (\n                          <Text\n                            color={\n                              collateralRatio.gt(CRITICAL_COLLATERAL_RATIO)\n                                ? \"success\"\n                                : collateralRatio.gt(1.2)\n                                ? \"warning\"\n                                : \"danger\"\n                            }\n                          >\n                            {new Percent(collateralRatio).prettify()}\n                          </Text>\n                        ))(trove.collateralRatio(price))}\n                      </td>\n                      <td>\n                        <Transaction\n                          id={`liquidate-${trove.ownerAddress}`}\n                          tooltip=\"Liquidate\"\n                          requires={[\n                            recoveryMode\n                              ? liquidatableInRecoveryMode(\n                                  trove,\n                                  price,\n                                  totalCollateralRatio,\n                                  lusdInStabilityPool\n                                )\n                              : liquidatableInNormalMode(trove, price)\n                          ]}\n                          send={liquity.send.liquidate.bind(liquity.send, trove.ownerAddress)}\n                        >\n                          <Button variant=\"dangerIcon\">\n                            <Icon name=\"trash\" />\n                          </Button>\n                        </Transaction>\n                      </td>\n                    </tr>\n                  )\n              )}\n            </tbody>\n          </Box>\n        </Box>\n      )}\n\n      {loading && <LoadingOverlay />}\n    </Card>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}