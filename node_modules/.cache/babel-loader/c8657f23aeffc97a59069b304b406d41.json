{"ast":null,"code":"import React from\"react\";import{Heading,Box,Card}from\"theme-ui\";import{Percent,Difference,LUSD_LIQUIDATION_RESERVE}from\"@liquity/lib-base\";import{useLiquitySelector}from\"@liquity/lib-react\";import{COIN}from\"../../strings\";import{StaticRow}from\"./Editor\";import{LoadingOverlay}from\"../LoadingOverlay\";import{CollateralRatio}from\"./CollateralRatio\";import{InfoIcon}from\"../InfoIcon\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var select=function select(_ref){var price=_ref.price;return{price:price};};export var TroveEditor=function TroveEditor(_ref2){var children=_ref2.children,original=_ref2.original,edited=_ref2.edited,fee=_ref2.fee,borrowingRate=_ref2.borrowingRate,changePending=_ref2.changePending;var _useLiquitySelector=useLiquitySelector(select),price=_useLiquitySelector.price;var feePct=new Percent(borrowingRate);var originalCollateralRatio=!original.isEmpty?original.collateralRatio(price):undefined;var collateralRatio=!edited.isEmpty?edited.collateralRatio(price):undefined;var collateralRatioChange=Difference.between(collateralRatio,originalCollateralRatio);return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Heading,{children:\"Trove\"}),/*#__PURE__*/_jsxs(Box,{sx:{p:[2,3]},children:[/*#__PURE__*/_jsx(StaticRow,{label:\"Collateral\",inputId:\"trove-collateral\",amount:edited.collateral.prettify(4),unit:\"ETH\"}),/*#__PURE__*/_jsx(StaticRow,{label:\"Debt\",inputId:\"trove-debt\",amount:edited.debt.prettify(),unit:COIN}),original.isEmpty&&/*#__PURE__*/_jsx(StaticRow,{label:\"Liquidation Reserve\",inputId:\"trove-liquidation-reserve\",amount:\"\".concat(LUSD_LIQUIDATION_RESERVE),unit:COIN,infoIcon:/*#__PURE__*/_jsx(InfoIcon,{tooltip:/*#__PURE__*/_jsx(Card,{variant:\"tooltip\",sx:{width:\"200px\"},children:\"An amount set aside to cover the liquidator\\u2019s gas costs if your Trove needs to be liquidated. The amount increases your debt and is refunded if you close your Trove by fully paying off its net debt.\"})})}),/*#__PURE__*/_jsx(StaticRow,{label:\"Borrowing Fee\",inputId:\"trove-borrowing-fee\",amount:fee.toString(2),pendingAmount:feePct.toString(2),unit:COIN,infoIcon:/*#__PURE__*/_jsx(InfoIcon,{tooltip:/*#__PURE__*/_jsx(Card,{variant:\"tooltip\",sx:{width:\"240px\"},children:\"This amount is deducted from the borrowed amount as a one-time fee. There are no recurring fees for borrowing, which is thus interest-free.\"})})}),/*#__PURE__*/_jsx(CollateralRatio,{value:collateralRatio,change:collateralRatioChange}),children]}),changePending&&/*#__PURE__*/_jsx(LoadingOverlay,{})]});};","map":{"version":3,"sources":["/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/src/components/Trove/TroveEditor.tsx"],"names":["React","Heading","Box","Card","Percent","Difference","LUSD_LIQUIDATION_RESERVE","useLiquitySelector","COIN","StaticRow","LoadingOverlay","CollateralRatio","InfoIcon","select","price","TroveEditor","children","original","edited","fee","borrowingRate","changePending","feePct","originalCollateralRatio","isEmpty","collateralRatio","undefined","collateralRatioChange","between","p","collateral","prettify","debt","width","toString"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,CAAkBC,GAAlB,CAAuBC,IAAvB,KAAmC,UAAnC,CAEA,OACEC,OADF,CAEEC,UAFF,CAOEC,wBAPF,KAQO,mBARP,CASA,OAASC,kBAAT,KAAmC,oBAAnC,CAEA,OAASC,IAAT,KAAqB,eAArB,CAEA,OAASC,SAAT,KAA0B,UAA1B,CACA,OAASC,cAAT,KAA+B,mBAA/B,CACA,OAASC,eAAT,KAAgC,mBAAhC,CACA,OAASC,QAAT,KAAyB,aAAzB,C,wFAaA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,UAAGC,CAAAA,KAAH,MAAGA,KAAH,OAAmC,CAAEA,KAAK,CAALA,KAAF,CAAnC,EAAf,CAEA,MAAO,IAAMC,CAAAA,WAAuC,CAAG,QAA1CA,CAAAA,WAA0C,OAOjD,IANJC,CAAAA,QAMI,OANJA,QAMI,CALJC,QAKI,OALJA,QAKI,CAJJC,MAII,OAJJA,MAII,CAHJC,GAGI,OAHJA,GAGI,CAFJC,aAEI,OAFJA,aAEI,CADJC,aACI,OADJA,aACI,yBACcd,kBAAkB,CAACM,MAAD,CADhC,CACIC,KADJ,qBACIA,KADJ,CAGJ,GAAMQ,CAAAA,MAAM,CAAG,GAAIlB,CAAAA,OAAJ,CAAYgB,aAAZ,CAAf,CAEA,GAAMG,CAAAA,uBAAuB,CAAG,CAACN,QAAQ,CAACO,OAAV,CAAoBP,QAAQ,CAACQ,eAAT,CAAyBX,KAAzB,CAApB,CAAsDY,SAAtF,CACA,GAAMD,CAAAA,eAAe,CAAG,CAACP,MAAM,CAACM,OAAR,CAAkBN,MAAM,CAACO,eAAP,CAAuBX,KAAvB,CAAlB,CAAkDY,SAA1E,CACA,GAAMC,CAAAA,qBAAqB,CAAGtB,UAAU,CAACuB,OAAX,CAAmBH,eAAnB,CAAoCF,uBAApC,CAA9B,CAEA,mBACE,MAAC,IAAD,yBACE,KAAC,OAAD,oBADF,cAGE,MAAC,GAAD,EAAK,EAAE,CAAE,CAAEM,CAAC,CAAE,CAAC,CAAD,CAAI,CAAJ,CAAL,CAAT,wBACE,KAAC,SAAD,EACE,KAAK,CAAC,YADR,CAEE,OAAO,CAAC,kBAFV,CAGE,MAAM,CAAEX,MAAM,CAACY,UAAP,CAAkBC,QAAlB,CAA2B,CAA3B,CAHV,CAIE,IAAI,CAAC,KAJP,EADF,cAQE,KAAC,SAAD,EAAW,KAAK,CAAC,MAAjB,CAAwB,OAAO,CAAC,YAAhC,CAA6C,MAAM,CAAEb,MAAM,CAACc,IAAP,CAAYD,QAAZ,EAArD,CAA6E,IAAI,CAAEvB,IAAnF,EARF,CAUGS,QAAQ,CAACO,OAAT,eACC,KAAC,SAAD,EACE,KAAK,CAAC,qBADR,CAEE,OAAO,CAAC,2BAFV,CAGE,MAAM,WAAKlB,wBAAL,CAHR,CAIE,IAAI,CAAEE,IAJR,CAKE,QAAQ,cACN,KAAC,QAAD,EACE,OAAO,cACL,KAAC,IAAD,EAAM,OAAO,CAAC,SAAd,CAAwB,EAAE,CAAE,CAAEyB,KAAK,CAAE,OAAT,CAA5B,yNAFJ,EANJ,EAXJ,cA8BE,KAAC,SAAD,EACE,KAAK,CAAC,eADR,CAEE,OAAO,CAAC,qBAFV,CAGE,MAAM,CAAEd,GAAG,CAACe,QAAJ,CAAa,CAAb,CAHV,CAIE,aAAa,CAAEZ,MAAM,CAACY,QAAP,CAAgB,CAAhB,CAJjB,CAKE,IAAI,CAAE1B,IALR,CAME,QAAQ,cACN,KAAC,QAAD,EACE,OAAO,cACL,KAAC,IAAD,EAAM,OAAO,CAAC,SAAd,CAAwB,EAAE,CAAE,CAAEyB,KAAK,CAAE,OAAT,CAA5B,yJAFJ,EAPJ,EA9BF,cAgDE,KAAC,eAAD,EAAiB,KAAK,CAAER,eAAxB,CAAyC,MAAM,CAAEE,qBAAjD,EAhDF,CAkDGX,QAlDH,GAHF,CAwDGK,aAAa,eAAI,KAAC,cAAD,IAxDpB,GADF,CA4DD,CA5EM","sourcesContent":["import React from \"react\";\nimport { Heading, Box, Card } from \"theme-ui\";\n\nimport {\n  Percent,\n  Difference,\n  Decimalish,\n  Decimal,\n  Trove,\n  LiquityStoreState,\n  LUSD_LIQUIDATION_RESERVE\n} from \"@liquity/lib-base\";\nimport { useLiquitySelector } from \"@liquity/lib-react\";\n\nimport { COIN } from \"../../strings\";\n\nimport { StaticRow } from \"./Editor\";\nimport { LoadingOverlay } from \"../LoadingOverlay\";\nimport { CollateralRatio } from \"./CollateralRatio\";\nimport { InfoIcon } from \"../InfoIcon\";\n\ntype TroveEditorProps = {\n  original: Trove;\n  edited: Trove;\n  fee: Decimal;\n  borrowingRate: Decimal;\n  changePending: boolean;\n  dispatch: (\n    action: { type: \"setCollateral\" | \"setDebt\"; newValue: Decimalish } | { type: \"revert\" }\n  ) => void;\n};\n\nconst select = ({ price }: LiquityStoreState) => ({ price });\n\nexport const TroveEditor: React.FC<TroveEditorProps> = ({\n  children,\n  original,\n  edited,\n  fee,\n  borrowingRate,\n  changePending\n}) => {\n  const { price } = useLiquitySelector(select);\n\n  const feePct = new Percent(borrowingRate);\n\n  const originalCollateralRatio = !original.isEmpty ? original.collateralRatio(price) : undefined;\n  const collateralRatio = !edited.isEmpty ? edited.collateralRatio(price) : undefined;\n  const collateralRatioChange = Difference.between(collateralRatio, originalCollateralRatio);\n\n  return (\n    <Card>\n      <Heading>Trove</Heading>\n\n      <Box sx={{ p: [2, 3] }}>\n        <StaticRow\n          label=\"Collateral\"\n          inputId=\"trove-collateral\"\n          amount={edited.collateral.prettify(4)}\n          unit=\"ETH\"\n        />\n\n        <StaticRow label=\"Debt\" inputId=\"trove-debt\" amount={edited.debt.prettify()} unit={COIN} />\n\n        {original.isEmpty && (\n          <StaticRow\n            label=\"Liquidation Reserve\"\n            inputId=\"trove-liquidation-reserve\"\n            amount={`${LUSD_LIQUIDATION_RESERVE}`}\n            unit={COIN}\n            infoIcon={\n              <InfoIcon\n                tooltip={\n                  <Card variant=\"tooltip\" sx={{ width: \"200px\" }}>\n                    An amount set aside to cover the liquidatorâ€™s gas costs if your Trove needs to be\n                    liquidated. The amount increases your debt and is refunded if you close your\n                    Trove by fully paying off its net debt.\n                  </Card>\n                }\n              />\n            }\n          />\n        )}\n\n        <StaticRow\n          label=\"Borrowing Fee\"\n          inputId=\"trove-borrowing-fee\"\n          amount={fee.toString(2)}\n          pendingAmount={feePct.toString(2)}\n          unit={COIN}\n          infoIcon={\n            <InfoIcon\n              tooltip={\n                <Card variant=\"tooltip\" sx={{ width: \"240px\" }}>\n                  This amount is deducted from the borrowed amount as a one-time fee. There are no\n                  recurring fees for borrowing, which is thus interest-free.\n                </Card>\n              }\n            />\n          }\n        />\n\n        <CollateralRatio value={collateralRatio} change={collateralRatioChange} />\n\n        {children}\n      </Box>\n\n      {changePending && <LoadingOverlay />}\n    </Card>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}