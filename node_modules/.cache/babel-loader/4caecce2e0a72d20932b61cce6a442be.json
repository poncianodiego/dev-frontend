{"ast":null,"code":"import _regeneratorRuntime from\"/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Card,Paragraph,Text}from\"theme-ui\";import{useLiquitySelector}from\"@liquity/lib-react\";import{InfoIcon}from\"../../InfoIcon\";import{useLiquity}from\"../../../hooks/LiquityContext\";import{Badge}from\"../../Badge\";import{fetchPrices}from\"../context/fetchPrices\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var selector=function selector(_ref){var remainingLiquidityMiningLQTYReward=_ref.remainingLiquidityMiningLQTYReward,totalStakedUniTokens=_ref.totalStakedUniTokens;return{remainingLiquidityMiningLQTYReward:remainingLiquidityMiningLQTYReward,totalStakedUniTokens:totalStakedUniTokens};};export var Yield=function Yield(){var _useLiquity=useLiquity(),_useLiquity$liquity$c=_useLiquity.liquity.connection,addresses=_useLiquity$liquity$c.addresses,liquidityMiningLQTYRewardRate=_useLiquity$liquity$c.liquidityMiningLQTYRewardRate;var _useLiquitySelector=useLiquitySelector(selector),remainingLiquidityMiningLQTYReward=_useLiquitySelector.remainingLiquidityMiningLQTYReward,totalStakedUniTokens=_useLiquitySelector.totalStakedUniTokens;var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),lqtyPrice=_useState2[0],setLqtyPrice=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),uniLpPrice=_useState4[0],setUniLpPrice=_useState4[1];var hasZeroValue=remainingLiquidityMiningLQTYReward.isZero||totalStakedUniTokens.isZero;var lqtyTokenAddress=addresses[\"lqtyToken\"];var uniTokenAddress=addresses[\"uniToken\"];var secondsRemaining=remainingLiquidityMiningLQTYReward.div(liquidityMiningLQTYRewardRate);var daysRemaining=secondsRemaining.div(60*60*24);useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$fetchPrices,lqtyPriceUSD,uniLpPriceUSD;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetchPrices(lqtyTokenAddress,uniTokenAddress);case 3:_yield$fetchPrices=_context.sent;lqtyPriceUSD=_yield$fetchPrices.lqtyPriceUSD;uniLpPriceUSD=_yield$fetchPrices.uniLpPriceUSD;setLqtyPrice(lqtyPriceUSD);setUniLpPrice(uniLpPriceUSD);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}))();},[lqtyTokenAddress,uniTokenAddress]);if(hasZeroValue||lqtyPrice===undefined||uniLpPrice===undefined)return null;var remainingLqtyInUSD=remainingLiquidityMiningLQTYReward.mul(lqtyPrice);var totalStakedUniLpInUSD=totalStakedUniTokens.mul(uniLpPrice);var yieldPercentage=remainingLqtyInUSD.div(totalStakedUniLpInUSD).mul(100);if(yieldPercentage.isZero)return null;return/*#__PURE__*/_jsxs(Badge,{children:[/*#__PURE__*/_jsxs(Text,{children:[daysRemaining===null||daysRemaining===void 0?void 0:daysRemaining.prettify(0),\" day yield \",yieldPercentage.toString(2),\"%\"]}),/*#__PURE__*/_jsx(InfoIcon,{tooltip:/*#__PURE__*/_jsxs(Card,{variant:\"tooltip\",sx:{minWidth:[\"auto\",\"352px\"]},children:[/*#__PURE__*/_jsxs(Paragraph,{children:[\"An \",/*#__PURE__*/_jsx(Text,{sx:{fontWeight:\"bold\"},children:\"estimate\"}),\" of the LQTY return on staked UNI LP tokens. The farm runs for 6-weeks, and the return is relative to the time remaining.\"]}),/*#__PURE__*/_jsxs(Paragraph,{sx:{fontSize:\"12px\",fontFamily:\"monospace\",mt:2},children:[\"($LQTY_REWARDS / $STAKED_UNI_LP) * 100 =\",\" \",/*#__PURE__*/_jsx(Text,{sx:{fontWeight:\"bold\"},children:\" Yield\"})]}),/*#__PURE__*/_jsxs(Paragraph,{sx:{fontSize:\"12px\",fontFamily:\"monospace\"},children:[\"($\",remainingLqtyInUSD.shorten(),\" / $\",totalStakedUniLpInUSD.shorten(),\") * 100 =\",/*#__PURE__*/_jsxs(Text,{sx:{fontWeight:\"bold\"},children:[\" \",yieldPercentage.toString(2),\"%\"]})]})]})})]});};","map":{"version":3,"sources":["/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/src/components/Farm/views/Yield.tsx"],"names":["React","useEffect","useState","Card","Paragraph","Text","useLiquitySelector","InfoIcon","useLiquity","Badge","fetchPrices","selector","remainingLiquidityMiningLQTYReward","totalStakedUniTokens","Yield","liquity","connection","addresses","liquidityMiningLQTYRewardRate","undefined","lqtyPrice","setLqtyPrice","uniLpPrice","setUniLpPrice","hasZeroValue","isZero","lqtyTokenAddress","uniTokenAddress","secondsRemaining","div","daysRemaining","lqtyPriceUSD","uniLpPriceUSD","console","error","remainingLqtyInUSD","mul","totalStakedUniLpInUSD","yieldPercentage","prettify","toString","minWidth","fontWeight","fontSize","fontFamily","mt","shorten"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Card, Paragraph, Text } from \"theme-ui\";\nimport { Decimal, LiquityStoreState } from \"@liquity/lib-base\";\nimport { useLiquitySelector } from \"@liquity/lib-react\";\nimport { InfoIcon } from \"../../InfoIcon\";\nimport { useLiquity } from \"../../../hooks/LiquityContext\";\nimport { Badge } from \"../../Badge\";\nimport { fetchPrices } from \"../context/fetchPrices\";\n\nconst selector = ({\n  remainingLiquidityMiningLQTYReward,\n  totalStakedUniTokens\n}: LiquityStoreState) => ({\n  remainingLiquidityMiningLQTYReward,\n  totalStakedUniTokens\n});\n\nexport const Yield: React.FC = () => {\n  const {\n    liquity: {\n      connection: { addresses, liquidityMiningLQTYRewardRate }\n    }\n  } = useLiquity();\n\n  const { remainingLiquidityMiningLQTYReward, totalStakedUniTokens } = useLiquitySelector(selector);\n  const [lqtyPrice, setLqtyPrice] = useState<Decimal | undefined>(undefined);\n  const [uniLpPrice, setUniLpPrice] = useState<Decimal | undefined>(undefined);\n  const hasZeroValue = remainingLiquidityMiningLQTYReward.isZero || totalStakedUniTokens.isZero;\n  const lqtyTokenAddress = addresses[\"lqtyToken\"];\n  const uniTokenAddress = addresses[\"uniToken\"];\n  const secondsRemaining = remainingLiquidityMiningLQTYReward.div(liquidityMiningLQTYRewardRate);\n  const daysRemaining = secondsRemaining.div(60 * 60 * 24);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const { lqtyPriceUSD, uniLpPriceUSD } = await fetchPrices(lqtyTokenAddress, uniTokenAddress);\n        setLqtyPrice(lqtyPriceUSD);\n        setUniLpPrice(uniLpPriceUSD);\n      } catch (error) {\n        console.error(error);\n      }\n    })();\n  }, [lqtyTokenAddress, uniTokenAddress]);\n\n  if (hasZeroValue || lqtyPrice === undefined || uniLpPrice === undefined) return null;\n\n  const remainingLqtyInUSD = remainingLiquidityMiningLQTYReward.mul(lqtyPrice);\n  const totalStakedUniLpInUSD = totalStakedUniTokens.mul(uniLpPrice);\n  const yieldPercentage = remainingLqtyInUSD.div(totalStakedUniLpInUSD).mul(100);\n\n  if (yieldPercentage.isZero) return null;\n\n  return (\n    <Badge>\n      <Text>\n        {daysRemaining?.prettify(0)} day yield {yieldPercentage.toString(2)}%\n      </Text>\n      <InfoIcon\n        tooltip={\n          <Card variant=\"tooltip\" sx={{ minWidth: [\"auto\", \"352px\"] }}>\n            <Paragraph>\n              An <Text sx={{ fontWeight: \"bold\" }}>estimate</Text> of the LQTY return on staked UNI\n              LP tokens. The farm runs for 6-weeks, and the return is relative to the time remaining.\n            </Paragraph>\n            <Paragraph sx={{ fontSize: \"12px\", fontFamily: \"monospace\", mt: 2 }}>\n              ($LQTY_REWARDS / $STAKED_UNI_LP) * 100 ={\" \"}\n              <Text sx={{ fontWeight: \"bold\" }}> Yield</Text>\n            </Paragraph>\n            <Paragraph sx={{ fontSize: \"12px\", fontFamily: \"monospace\" }}>\n              ($\n              {remainingLqtyInUSD.shorten()} / ${totalStakedUniLpInUSD.shorten()}) * 100 =\n              <Text sx={{ fontWeight: \"bold\" }}> {yieldPercentage.toString(2)}%</Text>\n            </Paragraph>\n          </Card>\n        }\n      ></InfoIcon>\n    </Badge>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}