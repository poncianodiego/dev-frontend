{"ast":null,"code":"import _slicedToArray from\"/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{Card,Heading,Box,Flex,Input,Label,Paragraph,Button,Spinner}from\"theme-ui\";import{Decimal}from\"@liquity/lib-base\";import{shortenAddress}from\"../utils/shortenAddress\";import{useLiquity}from\"../hooks/LiquityContext\";import{Transaction,useMyTransactionState}from\"../components/Transaction\";import{Icon}from\"../components/Icon\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FrontendRegistrationAction=function FrontendRegistrationAction(_ref){var kickbackRate=_ref.kickbackRate;var _useLiquity=useLiquity(),liquity=_useLiquity.liquity.send;var myTransactionId=\"register-frontend\";var myTransactionState=useMyTransactionState(myTransactionId);return myTransactionState.type===\"waitingForApproval\"?/*#__PURE__*/_jsxs(Button,{disabled:true,children:[/*#__PURE__*/_jsx(Spinner,{sx:{mr:2,color:\"white\"},size:\"20px\"}),\"Waiting for your approval\"]}):myTransactionState.type!==\"waitingForConfirmation\"&&myTransactionState.type!==\"confirmed\"?/*#__PURE__*/_jsx(Transaction,{id:myTransactionId,send:liquity.registerFrontend.bind(liquity,kickbackRate),children:/*#__PURE__*/_jsx(Button,{children:\"Register\"})}):null;};export var FrontendRegistration=function FrontendRegistration(){var _useLiquity2=useLiquity(),account=_useLiquity2.account;var _useState=useState(Decimal.from(0.8)),_useState2=_slicedToArray(_useState,2),kickbackRate=_useState2[0],setKickbackRate=_useState2[1];var _useState3=useState(Decimal.from(0.2)),_useState4=_slicedToArray(_useState3,2),cut=_useState4[0],setCut=_useState4[1];var _useState5=useState(\"80\"),_useState6=_slicedToArray(_useState5,2),kickbackRateString=_useState6[0],setKickbackRateString=_useState6[1];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Heading,{children:\"Choose a kickback rate\"}),/*#__PURE__*/_jsx(Box,{sx:{p:[2,3]},children:/*#__PURE__*/_jsxs(Flex,{children:[/*#__PURE__*/_jsx(Label,{children:\"Kickback rate\"}),/*#__PURE__*/_jsx(Label,{variant:\"unit\",children:\"%\"}),/*#__PURE__*/_jsx(Input,{sx:{maxWidth:\"200px\"},type:\"number\",step:\"any\",value:kickbackRateString,onChange:function onChange(e){setKickbackRateString(e.target.value);try{var newKickbackRate=Decimal.from(e.target.value||0).div(100);var newCut=Decimal.ONE.sub(newKickbackRate);setKickbackRate(newKickbackRate);setCut(newCut);}catch(_unused){}},onBlur:function onBlur(){setKickbackRateString(kickbackRate.mul(100).toString());}})]})})]}),/*#__PURE__*/_jsxs(Box,{sx:{display:\"flex\",flexDirection:\"column\",justifyContent:\"space-around\",m:3,mt:[3,null,4],mb:4,p:3,maxWidth:\"450px\",border:1,borderRadius:\"8px\",borderColor:\"danger\",boxShadow:2},children:[/*#__PURE__*/_jsxs(Flex,{sx:{alignItems:\"center\",mx:3,fontSize:4},children:[/*#__PURE__*/_jsx(Icon,{name:\"hand-paper\"}),/*#__PURE__*/_jsx(Heading,{sx:{ml:3,fontSize:\"18px\"},children:\"Before you proceed\"})]}),/*#__PURE__*/_jsxs(Paragraph,{sx:{fontSize:1,mt:3},children:[\"You are about to register \",/*#__PURE__*/_jsx(\"b\",{children:shortenAddress(account)}),\" to receive\",\" \",/*#__PURE__*/_jsxs(\"b\",{children:[cut.mul(100).toString(),\"%\"]}),\" of the LQTY rewards earned through this frontend.\"]}),/*#__PURE__*/_jsx(Paragraph,{sx:{fontSize:1,mt:3,fontWeight:\"bold\"},children:\"You will not be able to change the kickback rate for this address later.\"}),/*#__PURE__*/_jsx(Paragraph,{sx:{fontSize:1,mt:3},children:\"If you'd like to use a different kickback rate in the future, you will need to repeat this registration with a different address.\"})]}),/*#__PURE__*/_jsx(FrontendRegistrationAction,{kickbackRate:kickbackRate})]});};","map":{"version":3,"sources":["/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/src/pages/FrontendRegistration.tsx"],"names":["useState","Card","Heading","Box","Flex","Input","Label","Paragraph","Button","Spinner","Decimal","shortenAddress","useLiquity","Transaction","useMyTransactionState","Icon","FrontendRegistrationAction","kickbackRate","liquity","send","myTransactionId","myTransactionState","type","mr","color","registerFrontend","bind","FrontendRegistration","account","from","setKickbackRate","cut","setCut","kickbackRateString","setKickbackRateString","p","maxWidth","e","target","value","newKickbackRate","div","newCut","ONE","sub","mul","toString","display","flexDirection","justifyContent","m","mt","mb","border","borderRadius","borderColor","boxShadow","alignItems","mx","fontSize","ml","fontWeight"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { Card, Heading, Box, Flex, Input, Label, Paragraph, Button, Spinner } from \"theme-ui\";\n\nimport { Decimal } from \"@liquity/lib-base\";\n\nimport { shortenAddress } from \"../utils/shortenAddress\";\nimport { useLiquity } from \"../hooks/LiquityContext\";\nimport { Transaction, useMyTransactionState } from \"../components/Transaction\";\nimport { Icon } from \"../components/Icon\";\n\ntype FrontendRegistrationActionProps = {\n  kickbackRate: Decimal;\n};\n\nconst FrontendRegistrationAction: React.FC<FrontendRegistrationActionProps> = ({ kickbackRate }) => {\n  const {\n    liquity: { send: liquity }\n  } = useLiquity();\n\n  const myTransactionId = \"register-frontend\";\n  const myTransactionState = useMyTransactionState(myTransactionId);\n\n  return myTransactionState.type === \"waitingForApproval\" ? (\n    <Button disabled>\n      <Spinner sx={{ mr: 2, color: \"white\" }} size=\"20px\" />\n      Waiting for your approval\n    </Button>\n  ) : myTransactionState.type !== \"waitingForConfirmation\" &&\n    myTransactionState.type !== \"confirmed\" ? (\n    <Transaction id={myTransactionId} send={liquity.registerFrontend.bind(liquity, kickbackRate)}>\n      <Button>Register</Button>\n    </Transaction>\n  ) : null;\n};\n\nexport const FrontendRegistration: React.FC = () => {\n  const { account } = useLiquity();\n\n  const [kickbackRate, setKickbackRate] = useState(Decimal.from(0.8));\n  const [cut, setCut] = useState(Decimal.from(0.2));\n  const [kickbackRateString, setKickbackRateString] = useState(\"80\");\n\n  return (\n    <>\n      <Card>\n        <Heading>Choose a kickback rate</Heading>\n\n        <Box sx={{ p: [2, 3] }}>\n          <Flex>\n            <Label>Kickback rate</Label>\n            <Label variant=\"unit\">%</Label>\n\n            <Input\n              sx={{ maxWidth: \"200px\" }}\n              type=\"number\"\n              step=\"any\"\n              value={kickbackRateString}\n              onChange={e => {\n                setKickbackRateString(e.target.value);\n                try {\n                  const newKickbackRate = Decimal.from(e.target.value || 0).div(100);\n                  const newCut = Decimal.ONE.sub(newKickbackRate);\n\n                  setKickbackRate(newKickbackRate);\n                  setCut(newCut);\n                } catch {}\n              }}\n              onBlur={() => {\n                setKickbackRateString(kickbackRate.mul(100).toString());\n              }}\n            />\n          </Flex>\n        </Box>\n      </Card>\n\n      <Box\n        sx={{\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"space-around\",\n\n          m: 3,\n          mt: [3, null, 4],\n          mb: 4,\n          p: 3,\n          maxWidth: \"450px\",\n\n          border: 1,\n          borderRadius: \"8px\",\n          borderColor: \"danger\",\n          boxShadow: 2\n        }}\n      >\n        <Flex sx={{ alignItems: \"center\", mx: 3, fontSize: 4 }}>\n          <Icon name=\"hand-paper\" />\n          <Heading sx={{ ml: 3, fontSize: \"18px\" }}>Before you proceed</Heading>\n        </Flex>\n\n        <Paragraph sx={{ fontSize: 1, mt: 3 }}>\n          You are about to register <b>{shortenAddress(account)}</b> to receive{\" \"}\n          <b>{cut.mul(100).toString()}%</b> of the LQTY rewards earned through this frontend.\n        </Paragraph>\n\n        <Paragraph sx={{ fontSize: 1, mt: 3, fontWeight: \"bold\" }}>\n          You will not be able to change the kickback rate for this address later.\n        </Paragraph>\n\n        <Paragraph sx={{ fontSize: 1, mt: 3 }}>\n          If you'd like to use a different kickback rate in the future, you will need to repeat this\n          registration with a different address.\n        </Paragraph>\n      </Box>\n\n      <FrontendRegistrationAction {...{ kickbackRate }} />\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}