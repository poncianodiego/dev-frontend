{"ast":null,"code":"import _regeneratorRuntime from\"/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{Card,Paragraph,Text}from\"theme-ui\";import{useLiquitySelector}from\"@liquity/lib-react\";import{InfoIcon}from\"../InfoIcon\";import{useLiquity}from\"../../hooks/LiquityContext\";import{Badge}from\"../Badge\";import{fetchLqtyPrice}from\"./context/fetchLqtyPrice\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var selector=function selector(_ref){var lusdInStabilityPool=_ref.lusdInStabilityPool,remainingStabilityPoolLQTYReward=_ref.remainingStabilityPoolLQTYReward;return{lusdInStabilityPool:lusdInStabilityPool,remainingStabilityPoolLQTYReward:remainingStabilityPoolLQTYReward};};export var Yield=function Yield(){var _useLiquity=useLiquity(),addresses=_useLiquity.liquity.connection.addresses;var _useLiquitySelector=useLiquitySelector(selector),lusdInStabilityPool=_useLiquitySelector.lusdInStabilityPool,remainingStabilityPoolLQTYReward=_useLiquitySelector.remainingStabilityPoolLQTYReward;var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),lqtyPrice=_useState2[0],setLqtyPrice=_useState2[1];var hasZeroValue=remainingStabilityPoolLQTYReward.isZero||lusdInStabilityPool.isZero;var lqtyTokenAddress=addresses[\"lqtyToken\"];useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$fetchLqtyPrice,lqtyPriceUSD;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetchLqtyPrice(lqtyTokenAddress);case 3:_yield$fetchLqtyPrice=_context.sent;lqtyPriceUSD=_yield$fetchLqtyPrice.lqtyPriceUSD;setLqtyPrice(lqtyPriceUSD);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}))();},[lqtyTokenAddress]);if(hasZeroValue||lqtyPrice===undefined)return null;var yearlyHalvingSchedule=0.5;// 50% see LQTY distribution schedule for more info\nvar remainingLqtyOneYear=remainingStabilityPoolLQTYReward.mul(yearlyHalvingSchedule);var remainingLqtyOneYearInUSD=remainingLqtyOneYear.mul(lqtyPrice);var aprPercentage=remainingLqtyOneYearInUSD.div(lusdInStabilityPool).mul(100);var remainingLqtyInUSD=remainingStabilityPoolLQTYReward.mul(lqtyPrice);if(aprPercentage.isZero)return null;return/*#__PURE__*/_jsxs(Badge,{children:[/*#__PURE__*/_jsxs(Text,{children:[\"LQTY APR \",aprPercentage.toString(2),\"%\"]}),/*#__PURE__*/_jsx(InfoIcon,{tooltip:/*#__PURE__*/_jsxs(Card,{variant:\"tooltip\",sx:{width:[\"220px\",\"518px\"]},children:[/*#__PURE__*/_jsxs(Paragraph,{children:[\"An \",/*#__PURE__*/_jsx(Text,{sx:{fontWeight:\"bold\"},children:\"estimate\"}),\" of the LQTY return on the LUSD deposited to the Stability Pool over the next year, not including your ETH gains from liquidations.\"]}),/*#__PURE__*/_jsxs(Paragraph,{sx:{fontSize:\"12px\",fontFamily:\"monospace\",mt:2},children:[\"(($LQTY_REWARDS * YEARLY_DISTRIBUTION%) / DEPOSITED_LUSD) * 100 =\",\" \",/*#__PURE__*/_jsx(Text,{sx:{fontWeight:\"bold\"},children:\" APR\"})]}),/*#__PURE__*/_jsxs(Paragraph,{sx:{fontSize:\"12px\",fontFamily:\"monospace\"},children:[\"($\",remainingLqtyInUSD.shorten(),\" * 50% / $\",lusdInStabilityPool.shorten(),\") * 100 =\",/*#__PURE__*/_jsxs(Text,{sx:{fontWeight:\"bold\"},children:[\" \",aprPercentage.toString(2),\"%\"]})]})]})})]});};","map":{"version":3,"sources":["/Users/diegoponciano/Desktop/ryan/liquity/frontend/packages/dev-frontend/src/components/Stability/Yield.tsx"],"names":["React","useEffect","useState","Card","Paragraph","Text","useLiquitySelector","InfoIcon","useLiquity","Badge","fetchLqtyPrice","selector","lusdInStabilityPool","remainingStabilityPoolLQTYReward","Yield","addresses","liquity","connection","undefined","lqtyPrice","setLqtyPrice","hasZeroValue","isZero","lqtyTokenAddress","lqtyPriceUSD","console","error","yearlyHalvingSchedule","remainingLqtyOneYear","mul","remainingLqtyOneYearInUSD","aprPercentage","div","remainingLqtyInUSD","toString","width","fontWeight","fontSize","fontFamily","mt","shorten"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Card, Paragraph, Text } from \"theme-ui\";\nimport { Decimal, LiquityStoreState } from \"@liquity/lib-base\";\nimport { useLiquitySelector } from \"@liquity/lib-react\";\nimport { InfoIcon } from \"../InfoIcon\";\nimport { useLiquity } from \"../../hooks/LiquityContext\";\nimport { Badge } from \"../Badge\";\nimport { fetchLqtyPrice } from \"./context/fetchLqtyPrice\";\n\nconst selector = ({ lusdInStabilityPool, remainingStabilityPoolLQTYReward }: LiquityStoreState) => ({\n  lusdInStabilityPool,\n  remainingStabilityPoolLQTYReward\n});\n\nexport const Yield: React.FC = () => {\n  const {\n    liquity: {\n      connection: { addresses }\n    }\n  } = useLiquity();\n  const { lusdInStabilityPool, remainingStabilityPoolLQTYReward } = useLiquitySelector(selector);\n\n  const [lqtyPrice, setLqtyPrice] = useState<Decimal | undefined>(undefined);\n  const hasZeroValue = remainingStabilityPoolLQTYReward.isZero || lusdInStabilityPool.isZero;\n  const lqtyTokenAddress = addresses[\"lqtyToken\"];\n\n  useEffect(() => {\n    (async () => {\n      try {\n        const { lqtyPriceUSD } = await fetchLqtyPrice(lqtyTokenAddress);\n        setLqtyPrice(lqtyPriceUSD);\n      } catch (error) {\n        console.error(error);\n      }\n    })();\n  }, [lqtyTokenAddress]);\n\n  if (hasZeroValue || lqtyPrice === undefined) return null;\n\n  const yearlyHalvingSchedule = 0.5; // 50% see LQTY distribution schedule for more info\n  const remainingLqtyOneYear = remainingStabilityPoolLQTYReward.mul(yearlyHalvingSchedule);\n  const remainingLqtyOneYearInUSD = remainingLqtyOneYear.mul(lqtyPrice);\n  const aprPercentage = remainingLqtyOneYearInUSD.div(lusdInStabilityPool).mul(100);\n  const remainingLqtyInUSD = remainingStabilityPoolLQTYReward.mul(lqtyPrice);\n\n  if (aprPercentage.isZero) return null;\n\n  return (\n    <Badge>\n      <Text>LQTY APR {aprPercentage.toString(2)}%</Text>\n      <InfoIcon\n        tooltip={\n          <Card variant=\"tooltip\" sx={{ width: [\"220px\", \"518px\"] }}>\n            <Paragraph>\n              An <Text sx={{ fontWeight: \"bold\" }}>estimate</Text> of the LQTY return on the LUSD\n              deposited to the Stability Pool over the next year, not including your ETH gains from\n              liquidations.\n            </Paragraph>\n            <Paragraph sx={{ fontSize: \"12px\", fontFamily: \"monospace\", mt: 2 }}>\n              (($LQTY_REWARDS * YEARLY_DISTRIBUTION%) / DEPOSITED_LUSD) * 100 ={\" \"}\n              <Text sx={{ fontWeight: \"bold\" }}> APR</Text>\n            </Paragraph>\n            <Paragraph sx={{ fontSize: \"12px\", fontFamily: \"monospace\" }}>\n              ($\n              {remainingLqtyInUSD.shorten()} * 50% / ${lusdInStabilityPool.shorten()}) * 100 =\n              <Text sx={{ fontWeight: \"bold\" }}> {aprPercentage.toString(2)}%</Text>\n            </Paragraph>\n          </Card>\n        }\n      ></InfoIcon>\n    </Badge>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}